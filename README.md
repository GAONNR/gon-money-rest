# **GoN Money 2 안내서**

######~~안내서를 안내서 꺄륵!~~

> Forked [https://github.com/piixeltree/gon-money2](https://github.com/piixeltree/gon-money2) and extended RESTfully

> !Python 3.6 버전이 필요합니다. 3.7버전은 asyncio의 변경으로 아직 지원하지 않습니다.

---

GoN Money는 동아리 내의 채무관계를 확실히 하고, 쉽고 간편하게 채무를 처리할 수 있도록 하는 서비스입니다. Slack을 통해 거래의 등록, 처리, 설정 등을 관리할 수 있고 Web을 통해 거래들과 통계를 한눈에 볼 수 있습니다.
GoN Money의 기본적인 사용법은 다음과 같습니다.
`받을사람: Slack에서 MoneyBot으로 거래 등록 -> Web으로 확인`
`갚을사람: Web에서 확인 -> 송금뒤 Slack에서 MoneyBot으로 처리`

---

##Slack MoneyBot 사용법
MoneyBot은 Slack에서 제공하는 api로 만든 Bot User입니다(원딜 서폿 아님 ㅎ). #money 채널에서 미리 약속된 커맨드를 말하면 커맨드를 분석하여 DB에 적용시킵니다.
MoneyBot은
`!보내요 !보냄 !삭제 !소거 !도움 !받음 !설정 !계좌 !알림`
9개의 커맨드를 지원합니다.

---

###!보내요(Money)
이 커맨드들도 사용할 수 있어요!
`!m !money !주세요 !돈 !givme !sendme !show me the money !smtm`

빚진 상대에게 **돈을 내놓으라고 **요청하는 커맨드입니다.

`!보내요 [내용] @member price [계좌]`
이렇게 입력하면 member에게 price만큼의 돈을 [계좌]로 보낼것을 요청하게됩니다. [내용]은 무엇을 갚아야하는지 나타내는 것으로 쓰지 않아도 됩니다.

`!보내요 [내용] @member1 @member2 @member3 price [계좌]`
이렇게 여러명에게 한꺼번에 요청할 수도 있습니다.

`!보내요 [내용] @member1 @member2 price1 @member3 price2 [계좌]`
member1, member2에게 price1을 member3에게 price2를 요청할 때 이렇게 사용할 수 있습니다.

`!보내요 [내용]? (@member+ price)+ [계좌]`
가장 일반적인 형태입니다.

price는 python eval안에 들어가기 때문에 2진수, 8진수, 16진수, 덧셈, 뺄셈, 곱셈, 나눗셈, nEm notation 등이 가능합니다(띄어쓰기와 괄호는 허용되지 안허용 꺄륵!).
본인에게 요청하거나 가격이 0원 이하 500만원 초과인 경우는 등록되지 않습니다.

---

###!보냄(Send)
이 커맨드들도 사용할 수 있어요!
`!s !send !remit`

**빚을 갚았다**라는 커맨드입니다.

`!보냄 @member price`
해당 member에게 price만큼의 돈을 갚았음을 알립니다. 머니봇은 사용자가 해당 member에게 갚아야 하는 거래들을 오래된 거래부터 price만큼의 돈을 가지고 갚아나갑니다. 덜 보내거나 더 보낼까봐 걱정하지 마세요! 머니봇은 덜 보낸 경우에는 갚아야 할 돈을 갚은만큼 차감시켜 보여주고 더 보낸경우에는 얼마만큼을 더 보냈다고 알려줍니다.

`!보냄 number`
거래번호(요청번호, Web에서 확인 가능)가 number인 거래를 처리했다고 알립니다. 돈을 받는사람이 알림설정을 켜놓았다면 머니봇이 dm으로 거래번호 number인 거래가 처리되었다고 알려줍니다.

`!보냄 number @member price number number @member price`
보냄 역시 섞어서 쓸 수 있습니다.

`!보냄 (@member price | number)+`
가장 일반적인 형태입니다.

price는 python eval안에 들어가기 때문에 2진수, 8진수, 16진수, 덧셈, 뺄셈, 곱셈, 나눗셈, nEm notation 등이 가능합니다(띄어쓰기와 괄호는 허용되지 안허용 꺄르륵!).
본인에게 요청하거나 가격이 0원 이하 500만원 초과인 경우는 처리되지 않습니다.

---

###!삭제(Delete)
이 커맨드들도 사용할 수 있어요!
`!d !del !delete`

**잘못 등록한 요청(거래)을 삭제**합니다. 단, 이미 가격[소거](GoN%20Money2.md)가 일어난 거래일 경우에는 삭제되지 않습니다.

`!삭제 number`
거래번호(요청번호)가 number인 거래를 삭제합니다.

`!삭제 number1 number2`
여러개를 동시에 삭제할 수 있습니다.

`!삭제 (number)+`
가장 일반적인 형태입니다.

---

###!소거(Eliminate)
이 커맨드들도 사용할 수 있어요!
`!e !eliminate !reduce`

**서로서로 갚아야 하는 돈이 있다면 상쇄시켜주는 기능**입니다.
소거가 일어나는 조건은 두명의 member가 서로서로 갚아야 할 돈이 있고, 둘 다 소거설정이 켜져있어야 합니다. 조건을 만족하면 자동으로 상쇄를 시켜줍니다.

`!소거 (켬|킴|켜기|키기|on)`
소거 모드를 켭니다.

`!소거 (끔|끄기|off)`
소거 모드를 끕니다.

---

###!도움(Help)
이 커맨드들도 사용할 수 있어요!
`!h !help`

**채널 #money에 간단한 커맨드 예제를 종류별로 보여줍니다**.

---

###!받음(Recieve)
이 커맨드들도 사용할 수 있어요!
`!r !recv !recieve !확인 !check`

이 커맨드는 두가지 기능이 있습니다. 하나는 **설정을 하면 내가 한 요청을 처리했다고 했을 때 실제로 돈이 들어왔는지 확인하고 받았다고 다시 알리는 기능**, 다른 하나는 **상대가 보냈다고 하지 않아도 받았다고 하는 기능**입니다.

`!받음 (켬|킴|켜기|키기|on)`
받음 모드를 켭니다. 받음 모드가 켜져있으면 나에게 누가 !보냄을 했을 때 거래가 바로 완료상태로 되는게 아니라 확인대기 상태로 됩니다.

`!받음 (끔|끄기|off)`
받음 모드를 끕니다.

`!받음 number`
거래번호(요청번호)가 number인 거래가
확인 대기중인 경우: 확인하여 최종적으로 처리 완료됨 상태가 됩니다 .
미완료인 경우: 거래가 처리 완료됨 상태가 됩니다.

---

###!설정(Config)
이 커맨드들도 사용할 수 있어요!
`!c !config !set !setting`

**나의 설정을 보여줍니다.**

`!설정`
나의 기본계좌, 소거모드, 받음모드, 알림모드의 설정상태를 #money 채널에 알려줍니다.

---

###!계좌(Account)
이 커맨드들도 사용할 수 있어요!
`!a !account`

**나의 기본계좌를 등록합니다**.

`!계좌 [나의 계좌]`
[나의 계좌]를 기본 계좌로 등록시킵니다. 기본계좌가 있는 경우에는 !보내요를 할때 계좌를 입력하지 않아도 기본계좌로 보내는 것으로 등록됩니다.

---

###!알림(Notice)
이 커맨드들도 사용할 수 있어요!
`!n !notice`

[!보냄 번호]는 [!보냄 @member price]와 다르게 슬랙에서 돈을 받는 사람에게 알림을 보내지 않습니다. **알림설정을 켜놓으면 DM으로 몇번 거래가 처리되었는지 알려줍니다**.

`!알림 (켬|킴|켜기|키기|on)`
알림 모드를 켭니다.

`!알림 (끔|끄기|off)`
알림 모드를 끕니다.
